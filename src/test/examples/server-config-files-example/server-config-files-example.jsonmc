[
  {
    "server": {
      "serverId": "file-server",
      "port": 8082,
      "description": "Mock server demonstrating multi-part file downloads"
    },
    "expectations": [
      {
        "httpRequest": {
          "method": "GET",
          "path": "/api/download/documents/{id}",
          "pathParameters":{
            "id": "[a-zA-Z0-9-]+"
          }
        },
        "httpResponse": {
          "statusCode": 200,
          /*
           * The "file" field contains an absolute file path
           * to serve as a download. When this field is present,
           * the "body" field should be omitted.
           */
          "file": "/path/to/${pathVariables.id}",
          "headers": [
            {
              "name": "X-Download-Type",
              "values": ["multi-part"]
            }
          ]
        }
      },
      {
        "httpRequest": {
          "method": "GET",
          "path": "/api/download/images"
        },
        "httpResponse": {
          "statusCode": 200,
          "file": "/path/to/image1.png"
        }
      },
      {
        "httpRequest": {
          "method": "POST",
          "path": "/api/export/reports"
        },
        "httpResponse": {
          "statusCode": 200,
          /*
           * Files can be of different types - the callback will
           * automatically detect the content type based on file extensions
           */
          "file": "/path/to/report1.csv",
          "headers": [
            {
              "name": "X-Report-Count",
              "values": ["3"]
            }
          ]
        }
      },
      {
        "httpRequest": {
          "method": "GET",
          "path": "/api/download/archive"
        },
        "httpResponse": {
          "statusCode": 200,
          /*
           * Single file downloads also work with the files array
           */
          "file": "/path/to/archive.zip"
        }
      },
      {
        "httpRequest": {
          "method": "GET",
          "path": "/api/regular/data"
        },
        "httpResponse": {
          "statusCode": 200,
          /*
           * Regular responses with body continue to work as before
           * Only use "file" for multi-part file downloads
           */
          "body": `{"message": "This is a regular JSON response"}`
        }
      }
    ]
  }
]
