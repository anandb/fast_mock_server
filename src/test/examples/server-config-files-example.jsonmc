[
  {
    "server": {
      "serverId": "file-server",
      "port": 8082,
      "description": "Mock server demonstrating multi-part file downloads"
    },
    "expectations": [
      {
        "httpRequest": {
          "method": "GET",
          "path": "/api/download/documents/{id}"
        },
        /*
         * The "file" field is now inside the httpResponse object.
         * It contains a path or glob pattern to serve as a download.
         */
        "httpResponse": {
          "statusCode": 200,
          "file": "/path/to/${pathVariables.id}",
          "headers": [
            {
              "name": "X-Download-Type",
              "values": ["multi-part"]
            }
          ]
        }
      },
      {
        "httpRequest": {
          "method": "GET",
          "path": "/api/download/images"
        },
        "httpResponse": {
          "statusCode": 200,
          "file": "/path/to/image1.png"
        }
      },
      {
        "httpRequest": {
          "method": "POST",
          "path": "/api/export/reports"
        },
        "httpResponse": {
          "statusCode": 200,
          "file": "/path/to/report1.csv",
          "headers": [
            {
              "name": "X-Report-Count",
              "values": ["3"]
            }
          ]
        }
      },
      {
        "httpRequest": {
          "method": "GET",
          "path": "/api/download/archive"
        },
        "httpResponse": {
          "statusCode": 200,
          "file": "/path/to/archive.zip"
        }
      },
      {
        "httpRequest": {
          "method": "GET",
          "path": "/api/regular/data"
        },
        "httpResponse": {
          "statusCode": 200,
          /*
           * Regular responses with body continue to work as before
           */
          "body": `{"message": "This is a regular JSON response"}`
        }
      }
    ]
  }
]
